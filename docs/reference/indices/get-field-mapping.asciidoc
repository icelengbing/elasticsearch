[[indices-get-field-mapping]]
== 获取字段映射

获取字段映射 API 允许您检索一个或多个字段的映射定义。当您不需要通过 <<indices-get-mapping>> API 返回全部类型映射时它就非常有用。

例如，考虑如下映射：

[source,js]
--------------------------------------------------
PUT publications
{
    "mappings": {
        "_doc": {
            "properties": {
                "id": { "type": "text" },
                "title":  { "type": "text"},
                "abstract": { "type": "text"},
                "author": {
                    "properties": {
                        "id": { "type": "text" },
                        "name": { "type": "text" }
                    }
                }
            }
        }
    }
}
--------------------------------------------------
// TESTSETUP
// CONSOLE

以下仅返回字段 `title` 的映射：

[source,js]
--------------------------------------------------
GET publications/_mapping/_doc/field/title
--------------------------------------------------
// CONSOLE

响应如下：

[source,js]
--------------------------------------------------
{
   "publications": {
      "mappings": {
         "_doc": {
            "title": {
               "full_name": "title",
               "mapping": {
                  "title": {
                     "type": "text"
                  }
               }
            }
         }
      }
   }
}
--------------------------------------------------
// TESTRESPONSE

[float]
=== 多个索引、类型和字段

获取字段映射 API 可以通过单次调用从多个索引或类型中获取多个字段的映射信息。API 的一般用法遵循以下语法：`host:port/{index}/{type}/_mapping/field/{field}`，其中 `{index}`、`{type}` 和 `{field}` 支持由逗号分隔的名称或通配符列表。要获取全部索引的映射，您可以将 `{index}` 设置为 `_all`。以下是一些示例：

[source,js]
--------------------------------------------------
GET /twitter,kimchy/_mapping/field/message

GET /_all/_mapping/_doc/field/message,user.id

GET /_all/_mapping/_doc/field/*.id
--------------------------------------------------
// CONSOLE
// TEST[setup:twitter]
// TEST[s/^/PUT kimchy\nPUT book\n/]

[float]
=== 指定字段

获取映射 API 允许您指定以逗号分隔的字段列表。

例如，要选择 `author` 字段的 `id`，必须使用其全名 `author.id`。

[source,js]
--------------------------------------------------
GET publications/_mapping/_doc/field/author.id,abstract,name
--------------------------------------------------
// CONSOLE

返回：

[source,js]
--------------------------------------------------
{
   "publications": {
      "mappings": {
         "_doc": {
            "author.id": {
               "full_name": "author.id",
               "mapping": {
                  "id": {
                     "type": "text"
                  }
               }
            },
            "abstract": {
               "full_name": "abstract",
               "mapping": {
                  "abstract": {
                     "type": "text"
                  }
               }
            }
         }
      }
   }
}
--------------------------------------------------
// TESTRESPONSE

获取映射 API 也支持通配符。

[source,js]
--------------------------------------------------
GET publications/_mapping/_doc/field/a*
--------------------------------------------------
// CONSOLE

返回：

[source,js]
--------------------------------------------------
{
   "publications": {
      "mappings": {
         "_doc": {
            "author.name": {
               "full_name": "author.name",
               "mapping": {
                  "name": {
                     "type": "text"
                  }
               }
            },
            "abstract": {
               "full_name": "abstract",
               "mapping": {
                  "abstract": {
                     "type": "text"
                  }
               }
            },
            "author.id": {
               "full_name": "author.id",
               "mapping": {
                  "id": {
                     "type": "text"
                  }
               }
            }
         }
      }
   }
}
--------------------------------------------------
// TESTRESPONSE

[float]
=== 其他选项

[horizontal]
`include_defaults`::

    将参数 `include_defaults=true`  添加到查询字符串将导致响应包含默认值，这些默认值通常不显示。     