[[indices-open-close]]
== 打开 / 关闭索引 API

打开和关闭索引 API 允许关闭索引，然后打开它。一个关闭的索引在集群上几乎没有任何开销（除了维护其元数据），对其进行读/写操作均会被拒绝。可以打开一个关闭的索引，然后进行正常的恢复过程。

调用的 REST 端点为 `/{index}/_close` 和 `/{index}/_open`。例如：

[source,js]
--------------------------------------------------
POST /my_index/_close

POST /my_index/_open
--------------------------------------------------
// CONSOLE
// TEST[s/^/PUT my_index\n/]

可以打开和关闭多个索引。如果请求缺少索引，则会引发错误。可以使用 `ignore_unavailable = true` 参数禁用此行为。

所有索引都可以使用 `_all` 作为索引名称一次性全部打开或关闭，或者指定索引名称的模式（例如 `*`）。

通过将配置文件中的 `action.destructive_requires_name` 标志设置为  `true`，可以禁用使用通配符或 `_all`  标识索引。也可以通过群集更新设置 api 更改此设置。

关闭的索引占用大量磁盘空间，可能会导致托管环境出现问题。可以通过集群设置 API 将  `cluster.indices.close.enable` 设置为 `false` 来禁用关闭索引。默认是 `true`。

[float]
=== 等待活动分片

由于打开索引会分配其分片，因此创建索引时的 <<create index wait for active shards,`wait_for active_shards`>> 设置也适用于索引打开操作。打开索引 API  的 <<create index wait for active shards,`wait_for_active_shards`>>设置的默认值为0，这意味着该命令不会等待分配分片。
